<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.feng.oldfriend.dao.LyjRequirementMapper">
  <resultMap id="BaseResultMap" type="com.feng.oldfriend.entity.LyjRequirement">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="lyj_requirement_id" jdbcType="INTEGER" property="lyjRequirementId" />
    <result column="lyj_requirement_name" jdbcType="VARCHAR" property="lyjRequirementName" />
    <result column="lyj_requirement_description" jdbcType="VARCHAR" property="lyjRequirementDescription" />
    <result column="lyj_requirement_createuser" jdbcType="INTEGER" property="lyjRequirementCreateuser" />
    <result column="lyj_requirement_applyuser" jdbcType="INTEGER" property="lyjRequirementApplyuser" />
    <result column="lyj_requirement_isvolunteer" jdbcType="INTEGER" property="lyjRequirementIsvolunteer" />
    <result column="lyj_requirement_city" jdbcType="VARCHAR" property="lyjRequirementCity" />
    <result column="lyj_requirement_area" jdbcType="VARCHAR" property="lyjRequirementArea" />
    <result column="lyj_requirement_street" jdbcType="VARCHAR" property="lyjRequirementStreet" />
    <result column="lyj_requirement_createdatetime" jdbcType="TIMESTAMP" property="lyjRequirementCreatedatetime" />
    <result column="lyj_requirement_begindatetime" jdbcType="TIMESTAMP" property="lyjRequirementBegindatetime" />
    <result column="lyj_requirement_enddatetime" jdbcType="TIMESTAMP" property="lyjRequirementEnddatetime" />
    <result column="lyj_requirement_rawaddress" jdbcType="VARCHAR" property="lyjRequirementRawaddress" />
    <result column="lyj_requirement_maplocation" jdbcType="VARCHAR" property="lyjRequirementMaplocation" />
    <result column="lyj_requirement_reward" jdbcType="INTEGER" property="lyjRequirementReward" />
  </resultMap>

  <sql id="Base_Column_List">
      lyj_requirement.lyj_requirement_id,
      lyj_requirement.lyj_requirement_name,
      lyj_requirement.lyj_requirement_description,
      lyj_requirement.lyj_requirement_createuser,
      lyj_requirement.lyj_requirement_applyuser,
      lyj_requirement.lyj_requirement_isvolunteer,
      lyj_requirement.lyj_requirement_city,
      lyj_requirement.lyj_requirement_area,
      lyj_requirement.lyj_requirement_street,
      lyj_requirement.lyj_requirement_createdatetime,
      lyj_requirement.lyj_requirement_begindatetime,
      lyj_requirement.lyj_requirement_enddatetime,
      lyj_requirement.lyj_requirement_rawaddress,
      lyj_requirement.lyj_requirement_maplocation,
      lyj_requirement.lyj_requirement_reward
  </sql>

  <!--根据搜索内容进行查找数据-->
  <select id="getLyjRequirements" resultMap="BaseResultMap">

    <bind name="pattern" value="'%' + searchText + '%'"/>
    select
    <include refid="Base_Column_List"/>
    from lyj_requirement
    <where>
      <if test="searchText!=null and searchText!='' ">
        (
        lyj_requirement_name like #{pattern}
        )
      </if>
    </where>
    order by lyj_requirement_id

  </select>

  <!--根据搜索内容和需求类型ID进行查找数据-->
  <select id="getLyjRequirementsByTypeId" resultMap="BaseResultMap">
      <bind name="pattern" value="'%' + searchText + '%'"/>
      SELECT
      b.lyj_requirement_id,
      b.lyj_requirement_name,
      b.lyj_requirement_description,
      b.lyj_requirement_createuser,
      b.lyj_requirement_applyuser,
      b.lyj_requirement_isvolunteer,
      b.lyj_requirement_city,
      b.lyj_requirement_area,
      b.lyj_requirement_street,
      b.lyj_requirement_createdatetime,
      b.lyj_requirement_begindatetime,
      b.lyj_requirement_enddatetime,
      b.lyj_requirement_rawaddress,
      b.lyj_requirement_maplocation,
      b.lyj_requirement_reward
      FROM
      lyj_requirementtype_relation a left join
      lyj_requirement b
      on a.lyj_requirement_id=b.lyj_requirement_id
      where a.lyj_requirement_typeid=#{typeId}
      <if test="searchText!=null and searchText!='' ">
        (
        and b.lyj_requirement_name like #{pattern}
        )
      </if>
  </select>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from lyj_requirement
    where lyj_requirement_id = #{lyjRequirementId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" useGeneratedKeys="true" keyProperty="lyjRequirementId" keyColumn="lyj_requirement_id" parameterType="com.feng.oldfriend.entity.LyjRequirement">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into lyj_requirement (lyj_requirement_id, lyj_requirement_name, 
      lyj_requirement_description, lyj_requirement_createuser, 
      lyj_requirement_applyuser, lyj_requirement_isvolunteer, 
      lyj_requirement_city, lyj_requirement_area, 
      lyj_requirement_street, lyj_requirement_createdatetime, 
      lyj_requirement_begindatetime, lyj_requirement_enddatetime, 
      lyj_requirement_rawaddress, lyj_requirement_maplocation, 
      lyj_requirement_reward)
    values (#{lyjRequirementId,jdbcType=INTEGER}, #{lyjRequirementName,jdbcType=VARCHAR}, 
      #{lyjRequirementDescription,jdbcType=VARCHAR}, #{lyjRequirementCreateuser,jdbcType=INTEGER}, 
      #{lyjRequirementApplyuser,jdbcType=INTEGER}, #{lyjRequirementIsvolunteer,jdbcType=INTEGER}, 
      #{lyjRequirementCity,jdbcType=VARCHAR}, #{lyjRequirementArea,jdbcType=VARCHAR}, 
      #{lyjRequirementStreet,jdbcType=VARCHAR}, #{lyjRequirementCreatedatetime,jdbcType=TIMESTAMP}, 
      #{lyjRequirementBegindatetime,jdbcType=TIMESTAMP}, #{lyjRequirementEnddatetime,jdbcType=TIMESTAMP}, 
      #{lyjRequirementRawaddress,jdbcType=VARCHAR}, #{lyjRequirementMaplocation,jdbcType=VARCHAR}, 
      #{lyjRequirementReward,jdbcType=INTEGER})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.feng.oldfriend.entity.LyjRequirement">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update lyj_requirement
    set lyj_requirement_name = #{lyjRequirementName,jdbcType=VARCHAR},
      lyj_requirement_description = #{lyjRequirementDescription,jdbcType=VARCHAR},
      lyj_requirement_createuser = #{lyjRequirementCreateuser,jdbcType=INTEGER},
      lyj_requirement_applyuser = #{lyjRequirementApplyuser,jdbcType=INTEGER},
      lyj_requirement_isvolunteer = #{lyjRequirementIsvolunteer,jdbcType=INTEGER},
      lyj_requirement_city = #{lyjRequirementCity,jdbcType=VARCHAR},
      lyj_requirement_area = #{lyjRequirementArea,jdbcType=VARCHAR},
      lyj_requirement_street = #{lyjRequirementStreet,jdbcType=VARCHAR},
      lyj_requirement_createdatetime = #{lyjRequirementCreatedatetime,jdbcType=TIMESTAMP},
      lyj_requirement_begindatetime = #{lyjRequirementBegindatetime,jdbcType=TIMESTAMP},
      lyj_requirement_enddatetime = #{lyjRequirementEnddatetime,jdbcType=TIMESTAMP},
      lyj_requirement_rawaddress = #{lyjRequirementRawaddress,jdbcType=VARCHAR},
      lyj_requirement_maplocation = #{lyjRequirementMaplocation,jdbcType=VARCHAR},
      lyj_requirement_reward = #{lyjRequirementReward,jdbcType=INTEGER}
    where lyj_requirement_id = #{lyjRequirementId,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select lyj_requirement_id, lyj_requirement_name, lyj_requirement_description, lyj_requirement_createuser, 
    lyj_requirement_applyuser, lyj_requirement_isvolunteer, lyj_requirement_city, lyj_requirement_area, 
    lyj_requirement_street, lyj_requirement_createdatetime, lyj_requirement_begindatetime, 
    lyj_requirement_enddatetime, lyj_requirement_rawaddress, lyj_requirement_maplocation, 
    lyj_requirement_reward
    from lyj_requirement
    where lyj_requirement_id = #{lyjRequirementId,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select lyj_requirement_id, lyj_requirement_name, lyj_requirement_description, lyj_requirement_createuser, 
    lyj_requirement_applyuser, lyj_requirement_isvolunteer, lyj_requirement_city, lyj_requirement_area, 
    lyj_requirement_street, lyj_requirement_createdatetime, lyj_requirement_begindatetime, 
    lyj_requirement_enddatetime, lyj_requirement_rawaddress, lyj_requirement_maplocation, 
    lyj_requirement_reward
    from lyj_requirement
  </select>
</mapper>